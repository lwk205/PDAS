REM THIS PROGRAM OUTPUTS TO A FILE. YOU WOULD NORMALY MAKE THE EXTENSION .PGL
REM THIS WILL ALLOW IT TO BE PRINTED OR INPORTED TO ANY PROGRAM WHICH RECOG
REM NIZES HPGL PLOTTER FILES. IT CREATES A PROPER FILE WITH NO CARRIAGE
REM RETURNS OR LINE FEEDS THAT MAY MESS UP SOME PRINTERS.
REM I WAS UNABLE TO NOT OUTPUT CR AND LF WITH THE LPRINT STATEMENT
REM THEN AGAIN I NO NOTHING ABOUT QBASIC

10 'PROGRAM TO PLOT RESULTS FROM COMPRESSIBLE EPPLER CODE.
40 'AUGUST 23, 1990   J.G. RONCZ
50 KEY OFF
70 INPUT "ENTER FILE NAME TO BE PLOTTED: ", FILE$
75 INPUT "ENTER FILE NAME TO BE CREATED: ", OUT$
80 OPEN FILE$ FOR INPUT AS #1
90 OPEN OUT$ FOR OUTPUT AS #2
110 IF EOF(1) THEN GOSUB 600
120 LINE INPUT #1, PLOTTYPE$
190 IF INSTR(PLOTTYPE$, "DIAG") <> 0 THEN XSCALE = 826.34: YSCALE = 637.46: XOFF = 0: PRINT "CREATING DIAG": GOSUB 400
200 IF INSTR(PLOTTYPE$, "BLAY") <> 0 THEN XSCALE = 383.17: YSCALE = 591.18: XOFF = 0: PRINT "CREATING BLAY": GOSUB 400
210 IF INSTR(PLOTTYPE$, "CDCL") <> 0 THEN XSCALE = 870.08: YSCALE = 671.21: XOFF = -1: PRINT "CREATING CDCL": GOSUB 400
220 WHILE NOT EOF(1)
230 INPUT #1, X, Y, I
240 IF I = 999 THEN 290
250 PX = INT((X + XOFF) * XSCALE): PY = INT(Y * YSCALE)
260 IF I = 2 THEN PRINT #2, "PA"; LASTX; ","; LASTY; ";PD"; PX; ","; PY; ";PU;";
270 LASTX = PX: LASTY = PY
280 WEND: END
290 CLS : GOSUB 500
300 GOTO 110

REM CHR$(27) IS THE ESCAPE CHARACTER
REM  initialize PCL5 printer for HPGL/2
400  PRINT #2, CHR$(27); "E"; CHR$(27); "&l2A"; CHR$(27); "&l3O"; CHR$(27); "&l1E";
405  PRINT #2, CHR$(27); "*c8177x5880y"; CHR$(27); "*p50Y";
410  PRINT #2, CHR$(27); "*c0T"; CHR$(27); "%-1BBPIN;SP1";
420  PRINT #2, "PE7<=__<__;SP7;LT;PW0.254;RO0;PU;IW0,0,12000,8500;";
430  PRINT #2, "SP2;PA0,0;PU;";
440  RETURN

REM  end of page eject
500  PRINT #2, "PUSP0;PG;"; CHR$(27); "E";
510  RETURN

600 CLOSE
610 PRINT " ALL DONE"
620 PRINT CHR$(7)
630 END

399 SUB INIT

END SUB

